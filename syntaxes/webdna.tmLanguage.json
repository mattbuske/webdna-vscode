{
	"scopeName": "source.webdna",
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "WebDNA",
	"patterns": [
		{
			"include": "#webdna"
		},
		{
			"include": "text.html.derivative"
		}
	],
	"repository": {
		"webdna": {
			"patterns": [
				{ "include": "#comments" },
				{ "include": "#keywords" },
				{ "include": "#storage" },
				{ "include": "#support" },
				{ "include": "#sql" },
				{ "include": "#contexts-valid" },
				{ "include": "#tags-valid" },
				{ "include": "#strings" }
			]
		},

		"parameters": {
			"patterns": [
				{
					"begin": "(?i)([\\s|&])(multi|s(cope|how))(?![\\w:-])",
					"beginCaptures": {
					  "1": {
						"name": "variable.parameter.and.webdna"
					  },
					  "2": {
						"name": "entity.other.parameter-name.webdna"
					  }
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				},{
					"include": "#webdna"
				}
			]
		},

		"comments": {
			"begin": "\\[!\\]",
			"captures": {
				"0": {
					"name": "punctuation.definition.comment.webdna"
				}
			},
			"end": "\\[\/!\\]",
			"name": "comment.block.webdna",
			"patterns": [
				{ "include": "#comments" }
			]
		},

		"contexts-valid": {
			"patterns": [{
				"comment": "WebDNA AppendFile Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:appendfile)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:appendfile))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.appendfile.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						}
					},
					"end": "(/)((?i:appendfile))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.appendfile.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(file|secure))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.appendfile.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.appendfile.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:appendfile))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.appendfile.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA AppleScript Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:applescript)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:applescript))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.applescript.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						}
					},
					"end": "(/)((?i:applescript))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.applescript.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\])",
							"name": "meta.embedded.context.applescript.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.applescript.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:applescript))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.applescript.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA BoldWords Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:boldwords)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:boldwords))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.boldwords.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						}
					},
					"end": "(/)((?i:boldwords))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.boldwords.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s)(?i:(words))(?![\\w:-])",
							"beginCaptures": {
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.boldwords.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.boldwords.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:boldwords))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.boldwords.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA Capitalize Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:capitalize)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:capitalize))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.capitalize.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						}
					},
					"end": "(/)((?i:capitalize))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.capitalize.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\])",
							"name": "meta.embedded.context.capitalize.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.capitalize.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:capitalize))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.capitalize.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ConvertChars Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:convertchars)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:convertchars))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.convertchars.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						}
					},
					"end": "(/)((?i:convertchars))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.convertchars.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(&?)(?i:(word|db|table|case|delimiters))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.convertchars.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.convertchars.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:convertchars))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.convertchars.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ConvertWords Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:convertwords)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:convertwords))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.convertwords.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						}
					},
					"end": "(/)((?i:convertwords))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.convertwords.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(word|db|table|case|delimiters))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.convertwords.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.convertwords.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:convertwords))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.convertwords.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA CountChars Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:countchars)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:countchars))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.countchars.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						}
					},
					"end": "(/)((?i:countchars))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.countchars.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\])",
							"name": "meta.embedded.context.countchars.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.countchars.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:countchars))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.countchars.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA CountWords Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:countwords)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:countwords))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.countwords.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						}
					},
					"end": "(/)((?i:countwords))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.countwords.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "entity.name.tag.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s)(?i:(delimiters))(?![\\w:-])",
							"beginCaptures": {
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.countwords.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.countwords.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:countwords))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.countwords.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA DDEConnect Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:ddeconnect)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:ddeconnect))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.ddeconnect.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:ddeconnect))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.ddeconnect.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(program|topic))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.ddeconnect.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.ddeconnect.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:ddeconnect))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.ddeconnect.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:ddeconnect))",
								"patterns": [{
									"comment": "WebDNA DDESend Context",
									"begin": "(^[ \\t]+)?(?=\\[(?i:ddesend)\\b(?!-))",
									"beginCaptures": {
										"1": {
											"name": "punctuation.whitespace.embedded.leading.webdna"
										}
									},
									"end": "(?!\\G)([ \\t]*$\\n?)?",
									"endCaptures": {
										"1": {
											"name": "punctuation.whitespace.embedded.trailing.webdna"
										}
									},
									"patterns": [{
										"begin": "(\\[)((?i:ddesend))\\b",
										"beginCaptures": {
											"0": {
												"name": "meta.tag.metadata.ddesend.start.webdna"
											},
											"1": {
												"name": "punctuation.definition.tag.begin.webdna"
											},
											"2": {
												"name": "support.function.webdna"
											}
										},
										"end": "(/)((?i:ddesend))(\\])",
										"endCaptures": {
											"0": {
												"name": "meta.tag.metadata.ddesend.end.webdna"
											},
											"1": {
												"name": "punctuation.definition.tag.begin.webdna"
											},
											"2": {
												"name": "support.function.webdna"
											},
											"3": {
												"name": "punctuation.definition.tag.end.webdna"
											}
										},
										"patterns": [{
											"begin": "\\G",
											"end": "(?=/)",
											"patterns": [{
												"begin": "(\\])",
												"name": "meta.embedded.context.ddesend.webdna",
												"beginCaptures": {
													"0": {
														"name": "meta.tag.metadata.ddesend.start.webdna"
													},
													"1": {
														"name": "punctuation.definition.tag.end.webdna"
													}
												},
												"end": "((\\[))(?=/(?i:ddesend))",
												"endCaptures": {
													"0": {
														"name": "meta.tag.metadata.ddesend.end.webdna"
													},
													"1": {
														"name": "punctuation.definition.tag.begin.webdna"
													}
												},
												"patterns": [{
													"begin": "\\G",
													"end": "(?=\\[/(?i:ddesend))",
													"patterns": [{
														"include": "#webdna"
													},
													{ 
														"include": "text.html.derivative" 
													}]
												}]
											}]
										}]
									}]
								},{
									"include": "#webdna"
								},
								{ 
									"include": "text.html.derivative" 
								}]
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA Decrypt Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:decrypt)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:decrypt))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.decrypt.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:decrypt))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.decrypt.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(adata|count|emailformat|file|iv|method|prefix|seed|tagsize))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.decrypt.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.decrypt.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:decrypt))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.decrypt.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA DOS Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:dos)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:dos))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.dos.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:dos))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.dos.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\])",
							"name": "meta.embedded.context.dos.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.dos.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:dos))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.dos.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA Encrypt Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:encrypt)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:encrypt))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.encrypt.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:encrypt))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.encrypt.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(adata|count|emailformat|file|iv|method|prefix|seed|tagsize))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.encrypt.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.encrypt.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:encrypt))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.encrypt.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ExclusiveLock Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:exclusivelock)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:exclusivelock))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.exclusivelock.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:exclusivelock))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.exclusivelock.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(db))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.exclusivelock.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.exclusivelock.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:exclusivelock))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.exclusivelock.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"include": "#webdna"
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA FileInfo Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:fileinfo)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:fileinfo))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.fileinfo.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:fileinfo))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.fileinfo.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s)(?i:(file))(?![\\w:-])",
							"beginCaptures": {
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.fileinfo.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.fileinfo.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:fileinfo))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.fileinfo.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:fileinfo))",
								"patterns": [{
									"comment": "WebDNA FileInfo Internal Tags Context",
									"begin": "(\\[)(?i:(is(f(ile|older))|mod(date|time)|image(height|width)|(start|full)path|size|exists|filename))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "variable.language.fileinfo.webdna"
										}
									},
									"name": "meta.variable.fileinfo.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"include": "#webdna"
								},
								{ 
									"include": "text.html.derivative" 
								}]
							}]
						}]
					}]
				}]
			},{
				"begin": "(?i)(\\[)\\b(input|interpret|raw|shell|spawn|unurl|url)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "entity.name.tag.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[\/)\\b(input|interpret|raw|shell|spawn|unurl|url)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "entity.name.tag.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			}]
		},

		"keywords": {
			"patterns": [
				{ "include": "#keywords-valid" },
				{ "include": "#keywords-depreciated" }
			]
		},
		"keywords-conditional": {
			"patterns": [
				{ "include": "#keywords-conditional-depreciated" },
				{ "include": "#keywords-conditional-valid" }
			]
		},
		"keywords-conditional-depreciated": {
			"patterns": []
		},
		"keywords-conditional-valid": {
			"patterns": [{
				"begin": "(?i)(\\[)\\b(case|switch)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.conditional.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(value)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA case/switch parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(hideif|if|showif)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.conditional.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{ "include": "#webdna" }]
			},{
				"begin": "(?i)(\\[)(default|else|then)(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.conditional.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[\/)\\b(case|default|else|hideif|if|then|showif|switch)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.conditional.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			}]
		},
		"keywords-depreciated": {
			"patterns": [
				{ "include": "#keywords-conditional-depreciated" },
				{ "include": "#keywords-flow-depreciated" },
				{ "include": "#keywords-loop-depreciated" }
			]
		},
		"keywords-flow": {
			"patterns": [
				{ "include": "#keywords-flow-depreciated" },
				{ "include": "#keywords-flow-valid" }
			]
		},
		"keywords-flow-depreciated": {
			"patterns": [{
				"begin": "(?i)(\\[)(html1|html2|html3)(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "invalid.deprecated.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[\/)(html1|html2|html3)(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "invalid.deprecated.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			}]
		},
		"keywords-flow-valid": {
			"patterns": [{
				"comment": "WebDNA FormVariables Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:formvariables)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:formvariables))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.formvariables.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.flow.webdna"
						}
					},
					"end": "(/)((?i:formvariables))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.formvariables.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.flow.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(name|exact|form))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.formvariables.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.formvariables.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:formvariables))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.formvariables.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:formvariables))",
								"patterns": [{
									"comment": "WebDNA FormVariables Internal Tags Context",
									"begin": "(\\[)(?i:(name|value|index))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "variable.language.formvariables.webdna"
										}
									},
									"name": "meta.variable.formvariables.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"include": "#webdna"
								},{ 
									"include": "text.html.derivative" 
								}]
							}]
						}]
					}]
				}]
			},{
				"begin": "(?i)(\\[)(return)(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.flow.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[/)(return)(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.flow.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[)(redirect)(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.flow.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s])(url)(?![\\w:-])",
					"beginCaptures": {
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)(permredirect)(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.flow.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s])(url)(?![\\w:-])",
					"beginCaptures": {
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				},{
					"include": "#webdna"
				}]
			}]
		},
		"keywords-loop-depreciated": {
			"patterns": []
		},
		"keywords-loop-valid": {
			"patterns": [{
				"comment": "WebDNA LineItems Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:lineitems)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:lineitems))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.lineitems.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						}
					},
					"end": "(/)((?i:lineitems))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.lineitems.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\])",
							"name": "meta.embedded.context.lineitems.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.lineitems.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:lineitems))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.lineitems.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"comment": "WebDNA LineItems Internal Tags Context",
								"begin": "(\\[)(?i:(lineindex|sku|quantity|price|t(axable|ext(a|b|c|d|e))|canemail|unitshipcost))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "variable.language.lineitems.webdna"
									}
								},
								"name": "meta.variable.lineitems.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"comment": "WebDNA LineItems Internal Tags Context (Depreciated)",
								"begin": "(\\[)(?i:(quantityprice))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "invalid.depreciated.lineitems.webdna"
									}
								},
								"name": "meta.variable.lineitems.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"include": "#webdna"
							},{ 
								"include": "text.html.derivative" 
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ListChars Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:listchars)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:listchars))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.listchars.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						}
					},
					"end": "(/)((?i:listchars))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.listchars.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(chars|from|start|end))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.listchars.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.listchars.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:listchars))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.listchars.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"comment": "WebDNA ListChars Internal Tags Context",
								"begin": "(\\[)(?i:(index|char|position))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "variable.language.listchars.webdna"
									}
								},
								"name": "meta.variable.listchars.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"include": "#webdna"
							},{ 
								"include": "text.html.derivative" 
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ListCookies Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:listcookies)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:listcookies))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.listcookies.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						}
					},
					"end": "(/)((?i:listcookies))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.listcookies.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(name|exact))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.listcookies.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.listcookies.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:listcookies))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.listcookies.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"comment": "WebDNA ListCookies Internal Tags Context",
								"begin": "(\\[)(?i:(index|name|value))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "variable.language.listcookies.webdna"
									}
								},
								"name": "meta.variable.listcookies.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"include": "#webdna"
							},{ 
								"include": "text.html.derivative" 
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ListDatabases Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:listdatabases)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:listdatabases))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.listdatabases.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						}
					},
					"end": "(/)((?i:listdatabases))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.listdatabases.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\])",
							"name": "meta.embedded.context.listdatabases.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.listdatabases.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:listdatabases))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.listdatabases.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"comment": "WebDNA ListDatabases Internal Tags Context",
								"begin": "(\\[)(?i:(n(ame|um(records|fields))|index))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "variable.language.listdatabases.webdna"
									}
								},
								"name": "meta.variable.listdatabases.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"include": "#webdna"
							},{ 
								"include": "text.html.derivative" 
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ListFields Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:listfields)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:listfields))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.listfields.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						}
					},
					"end": "(/)((?i:listfields))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.listfields.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(db|conn_ref|table))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.listfields.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.listfields.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:listfields))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.listfields.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"comment": "WebDNA ListFields Internal Tags Context",
								"begin": "(\\[)(?i:(fieldname|index|ordinal|datatype|allownull|width))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "variable.language.listfields.webdna"
									}
								},
								"name": "meta.variable.listfields.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"include": "#webdna"
							},{ 
								"include": "text.html.derivative" 
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ListFiles Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:listfiles)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:listfiles))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.listfiles.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						}
					},
					"end": "(/)((?i:listfiles))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.listfiles.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(path|name|showinvisibles|exact))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.listfiles.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.listfiles.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:listfiles))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.listfiles.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"comment": "WebDNA ListFiles Internal Tags Context",
								"begin": "(\\[)(?i:(isf(ile|older)|f(ilename|ullpath)|mod(time|date)|create(time|date)|size|index|startpath))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "variable.language.listfiles.webdna"
									}
								},
								"name": "meta.variable.listfiles.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"include": "#webdna"
							},{ 
								"include": "text.html.derivative" 
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ListMIMEHeaders Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:listmimeheaders)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:listmimeheaders))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.listmimeheaders.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						}
					},
					"end": "(/)((?i:listmimeheaders))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.listmimeheaders.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(name|exact))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.listmimeheaders.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.listmimeheaders.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:listmimeheaders))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.listmimeheaders.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"comment": "WebDNA ListMIMEHeaders Internal Tags Context",
								"begin": "(\\[)(?i:(index|name|value))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "variable.language.listmimeheaders.webdna"
									}
								},
								"name": "meta.variable.listmimeheaders.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"include": "#webdna"
							},{ 
								"include": "text.html.derivative" 
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ListPath Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:listpath)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:listpath))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.listpath.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						}
					},
					"end": "(/)((?i:listpath))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.listpath.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(path|(file|path)only))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.listpath.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.listpath.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:listpath))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.listpath.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"comment": "WebDNA ListPath Internal Tags Context",
								"begin": "(\\[)(?i:(index|filename|name))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "variable.language.listpath.webdna"
									}
								},
								"name": "meta.variable.listpath.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"include": "#webdna"
							},{ 
								"include": "text.html.derivative" 
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ListVariables Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:listvariables)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:listvariables))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.listvariables.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						}
					},
					"end": "(/)((?i:listvariables))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.listvariables.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(name|exact|type))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.listvariables.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.listvariables.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:listvariables))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.listvariables.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"comment": "WebDNA ListVariables Internal Tags Context",
								"begin": "(\\[)(?i:(name|value|index|secure))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "variable.language.listvariables.webdna"
									}
								},
								"name": "meta.variable.listvariables.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"include": "#webdna"
							},{ 
								"include": "text.html.derivative" 
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA ListWords Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:listwords)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:listwords))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.listwords.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						}
					},
					"end": "(/)((?i:listwords))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.listwords.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "keyword.control.loop.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(words|delimiters|tabs))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.listwords.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.listwords.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:listwords))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.listwords.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"comment": "WebDNA ListWords Internal Tags Context",
								"begin": "(\\[)(?i:(index|word|delimiter))(?=\\])",
								"beginCaptures": {
									"1": {
										"name": "punctuation.definition.tag.begin.webdna"
									},
									"2": {
										"name": "variable.language.listwords.webdna"
									}
								},
								"name": "meta.variable.listwords.$2.webdna",
								"end": "\\]",
								"endCaptures": {
									"0": {
										"name": "punctuation.definition.tag.end.webdna"
									}
								}
							},{
								"include": "#webdna"
							},{ 
								"include": "text.html.derivative" 
							}]
						}]
					}]
				}]
			}]
		},
		"keywords-valid": {
			"patterns": [
				{ "include": "#keywords-conditional-valid" },
				{ "include": "#keywords-flow-valid" },
				{ "include": "#keywords-loop-valid" }
			]
		},

		

		"storage": {
			"patterns": [{
				"begin": "(?i)(\\[)\\b(function)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "storage.type.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(name|preparse|scope)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[/)\\b(function)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "storage.type.variable.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[)\\b(text)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "storage.type.variable.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(multi|s(ecure|cope|how))(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
					  	"2": {
							"name": "variable.parameter.webdna"
					  	}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(math)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "storage.type.variable.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(s(ecure|cope|how))(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
					  	"2": {
							"name": "variable.parameter.webdna"
					  	}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				},{
					"begin": "(?i)([\\s|&])(date|time)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
					  	"2": {
							"name": "variable.parameter.webdna"
					  	}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#webdna" }
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[\/)\\b(text|math)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "storage.type.variable.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			}]
		},

		"strings": {
			"patterns": [{
				"name": "string.quoted.double.webdna",
				"begin": "\"",
				"end": "\"",
				"patterns": [{
					"name": "constant.character.escape.webdna",
					"match": "\\\\."
				}]
			},{
				"patterns": [{
					"name": "string.quoted.single.webdna",
					"match": "'.*?'"
				}]
			}]
		},

		"support": {
			"patterns": [
				{ "include": "#support-function" }
			]
		},
		"support-function": {
			"patterns": [
				{
					"include": "#support-function-depreciated"
				},
				{
					"include": "#support-function-valid"
				}
			]
		},
		"support-function-depreciated": {
			"patterns": []
		},
		"support-function-valid": {
			"patterns": [{
				"begin": "(?i)(\\[)\\b(browsername|cart|command|elapsedtime|flushdatabases|flushcache|freememory|httpmethod|ipaddress|issecureclient|lastautonumber|lastrandom|password|platform|product|realip|referrer|referer|thisfile|thisport|thishost|thisurl|thisurlplusget|username|version|webserver)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[)\\b(authenticate)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(realm)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						  { "include": "#parameter-interior" }
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(calcfilecrc32|deletefile)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(file)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(createfolder|deletefolder)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(path)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(copyfile|copyfolder|movefile|renamefile)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(to|from)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(closedatabase|commitdatabase)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(db)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(clearlineitems|purchase)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(cart|file)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(date|random|time)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(format)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(getcookie|getmimeheader)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(name)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(setmimeheader)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(name|value)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(setcookie)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(domain|expires|name|path|value)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(removelineitem)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(cart|file|index)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(protect)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(groups)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(validcard)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(accountNum|card)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(findstring)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(source|find|matchcase|reverse|startat)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(filecompare)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(method|file1|file2|file1crc)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				},{
					"include": "#webdna"
				}]
			}]
		},

		"parameter-interior": {
			"patterns": [{
				"begin": "=",
				"beginCaptures": {
					"0": {
						"name": "punctuation.separator.key-value.webdna"
					}
				},
				"end": "(?<=[^\\s=])(?=&|\\])",
				"patterns": [
					{ "include": "#webdna" }
				]
			}]
		},

		"sql": {
			"patterns": [
				{
					"include": "#sql-depreciated"
				},
				{
					"include": "#sql-valid"
				}
			]
		},
		"sql-depreciated": {
			"patterns": [{
				"comment": "WebDNA SQLConnect Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:sqlconnect)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:sqlconnect))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlconnect.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:sqlconnect))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlconnect.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(&?)(?i:(d(atabase|btype)|p(ort|wd)|host|uid|conn_var|var))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.sqlconnect.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlconnect.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:sqlconnect))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlconnect.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:sqlconnect))",
								"patterns": [{
									"comment": "WebDNA SQLConnect Internal Tags",
									"begin": "(\\[)(?i:(sql_(host|server(type|ver)|clientver|dbname)))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "variable.language.sqlconnect.webdna"
										}
									},
									"name": "meta.variable.sqlconnect.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"include": "#webdna"
								},
								{ 
									"include": "text.html.derivative" 
								}]
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA SQLInfo Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:sqlinfo)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:sqlinfo))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlinfo.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:sqlinfo))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlinfo.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(&?)(?i:(conn_ref|ref))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.sqlinfo.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlinfo.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:sqlinfo))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlinfo.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:sqlinfo))",
								"patterns": [{
									"comment": "WebDNA SQLInfo Internal Tags",
									"begin": "(\\[)(?i:(sql_(host|server(type|ver)|clientver|dbname)))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "variable.language.sqlinfo.webdna"
										}
									},
									"name": "meta.variable.sqlinfo.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"include": "#webdna"
								},
								{ 
									"include": "text.html.derivative" 
								}]
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA SQLResult Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:sqlresult)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:sqlresult))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlresult.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:sqlresult))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlresult.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(&?)(?i:(result_ref|ref))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.sqlresult.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlresult.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:sqlresult))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlresult.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:sqlresult))",
								"patterns": [{
									"comment": "WebDNA SQLResult Internal Tags",
									"begin": "(\\[)(?i:(commandtext|num(found|fields|rowsaffected)|insertid))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "variable.language.sqlresult.webdna"
										}
									},
									"name": "meta.variable.sqlresult.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"comment": "WebDNA SQLResult Founditems",
									"begin": "(\\[/?)(?i:(founditems))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "keyword.control.loop.sqlresult.webdna"
										}
									},
									"name": "meta.variable.sqlresult.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"include": "#webdna"
								},
								{ 
									"include": "text.html.derivative" 
								}]
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA SQLExecute Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:sqlexecute)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:sqlexecute))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlexecute.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:sqlexecute))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlexecute.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(&?)(?i:(result_var|ref|conn_ref|var))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.sqlexecute.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlexecute.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:sqlexecute))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlexecute.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:sqlexecute))",
								"patterns": [{
									"include": "#webdna"
								},
								{ 
									"include": "source.sql" 
								}]
							}]
						}]
					}]
				}]
			},{
				"begin": "(\\[)\\b(?i:(sqldisconnect))\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "([\\s|&])(?i:(conn_ref|ref))(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(\\[)\\b(?i:(sqlrelease))\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "([\\s|&])(?i:(result_ref|ref))(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				},{
					"include": "#webdna"
				}]
			}]
		},
		"sql-valid": {
			"patterns": [{
				"comment": "WebDNA SQL Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:sql)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:sql))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.sql.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:sql))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.sql.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(\\s|&)(?i:(dsn|username|password|max))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"begin": "(\\s|&)(?i:(statement))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [{
								"begin": "=",
								"beginCaptures": {
									"0": {
										"name": "punctuation.separator.key-value.webdna"
									}
								},
								"end": "(?<=[^\\s=])(?=&|\\])",
								"patterns": [
									{ "include": "#webdna" },								
									{ "include": "source.sql" }	
								]
							}]
						},{
							"include": "#webdna"
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.sql.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.sql.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:sql))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.sql.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:sql))",
								"patterns": [{
									"comment": "WebDNA SQL Internal Tags",
									"begin": "(\\[)(?i:(numfound))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "variable.language.sql.webdna"
										}
									},
									"name": "meta.variable.sql.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"comment": "WebDNA SQL Founditems",
									"begin": "(\\[/?)(?i:(founditems))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "keyword.control.loop.sql.webdna"
										}
									},
									"name": "meta.variable.sql.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"include": "#webdna"
								},
								{ 
									"include": "text.html.derivative" 
								}]
							}]
						}]
					}]
				}]
			}]
		},

		"tags-valid": {
			"patterns": [
				{
					"begin": "(?i)(\\[)\\b(delete|include|lookup)\\b(?=\\s|\\])",
					"beginCaptures": {
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "\\]",
					"endCaptures": {
						"0": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [
						{
							"include": "#parameters"
						},{
							"include": "#webdna"
						}
					]
				},
				{
					"begin": "(?i)(\\[)([^ ]*?)(?=\\])",
					"beginCaptures": {
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "variable.webdna"
						}
					},
					"end": "\\]",
					"endCaptures": {
						"0": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					}
				}
			]
		}
	}
}